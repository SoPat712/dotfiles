import{u as K,__tla as __tla_0}from"./ArrayPagination-D_SxCqyJ.js";import{D as Q,E as q,L as l,F as z,G as H,s as R,I as J,t as f,i as X,J as m,w as Y,A as Z,K as c,f as ee,M as S,N as te,O as le,P as ae,h as se,Q as oe,R as ne,C as ue,__tla as __tla_1}from"./index-CfNDsQKB.js";import{g as ie,G as re,d as N,c as g,H as de,$ as me,I as i,W as T,m as e,K as a,T as ce,X as v,M as r,u as o,J as y,Q as w,O as V,F,a0 as pe,V as fe,L as b}from"./vue--7UcA1iU.js";import"./vuetify-GhifFkZ7.js";let xe;let __tla=Promise.all([(()=>{try{return __tla_0}catch{}})(),(()=>{try{return __tla_1}catch{}})()]).then(async()=>{let ge,ve,ye,Ve,_e,Le;ge={class:"pa-3"};ve={style:{"font-size":"1.6em !important"},class:"subtitle-1 ml-2"};ye={class:"d-flex justify-end"};Ve={class:"d-flex mr-8 overflow-hidden"};_e={class:"d-flex"};Le=ie({__name:"Logs",setup(he){const E=ce(),{t:O}=re(),_=Q(),B=q(),L=N([{title:l[l.NORMAL],value:l.NORMAL},{title:l[l.INFO],value:l.INFO},{title:l[l.WARNING],value:l.WARNING},{title:l[l.CRITICAL],value:l.CRITICAL}]),u=N([l.NORMAL,l.INFO,l.WARNING,l.CRITICAL]),h=N(""),P=g(()=>_.logs),M=g(()=>P.value.filter(t=>u.value.includes(t.type))),C=g(()=>u.value.length>0),I=g(()=>u.value.length===L.value.length),{results:x}=z(M,h,t=>t.message),{paginatedResults:$,currentPage:d,pageCount:p}=K(x,30),k=()=>{E.push({name:"dashboard"})},G=t=>`logtype-${l[t?.type]?.toLowerCase()}`,U=t=>l[t.type],W=t=>ne(t.timestamp*1e3).format(B.dateFormat),j=()=>{I.value?u.value=[]:u.value=L.value.map(t=>t.value)},A=t=>{t.key==="Escape"&&k()};return de(async()=>{document.addEventListener("keydown",A),await _.cleanAndFetchLogs(),H(_.fetchLogs,15e3)}),me(()=>{document.removeEventListener("keydown",A)}),(t,n)=>(i(),T("div",ge,[e(R,{"no-gutters":"",align:"center",justify:"center"},{default:a(()=>[e(f,null,{default:a(()=>[v("h1",ve,r(o(O)("logs.title")),1)]),_:1}),e(f,null,{default:a(()=>[v("div",ye,[e(X,{icon:"mdi-close",variant:"plain",onClick:k})])]),_:1})]),_:1}),e(J,null,{default:a(()=>[e(m,null,{default:a(()=>[e(R,null,{default:a(()=>[e(f,{cols:"6"},{default:a(()=>[e(Y,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=s=>u.value=s),items:L.value,label:t.$t("logs.filters.type"),"hide-details":"",multiple:"",chips:""},{"prepend-item":a(()=>[e(m,{title:t.$t("common.selectAll"),onClick:j},{prepend:a(()=>[e(Z,{indeterminate:C.value&&!I.value,"model-value":C.value},null,8,["indeterminate","model-value"])]),_:1},8,["title"]),e(c)]),_:1},8,["modelValue","items","label"])]),_:1}),e(f,{cols:"6"},{default:a(()=>[e(ee,{modelValue:h.value,"onUpdate:modelValue":n[1]||(n[1]=s=>h.value=s),label:t.$t("logs.filters.query"),"hide-details":""},null,8,["modelValue","label"])]),_:1})]),_:1})]),_:1}),e(c,{class:"my-3",thickness:"5"}),o(p)>1?(i(),y(m,{key:0},{default:a(()=>[e(S,{modelValue:o(d),"onUpdate:modelValue":n[2]||(n[2]=s=>w(d)?d.value=s:null),length:o(p),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):V("",!0),e(c),(i(!0),T(F,null,pe(o($),(s,D)=>(i(),T(F,null,[D>0?(i(),y(c,{key:0})):V("",!0),e(m,{class:"pa-0"},{default:a(()=>[e(te,{class:"p-0"},{default:a(()=>[e(le,{class:fe([G(s),"pa-0"])},{default:a(()=>[e(ae,{class:"text-no-wrap"},{default:a(()=>[v("div",Ve,"["+r(s.id)+"] "+r(s.message),1),e(se),v("div",_e,r(W(s)),1)]),_:2},1024),e(oe,{class:"wrap-word text-select"},{default:a(()=>[b(" ["+r(U(s))+"] "+r(s.message),1)]),_:2},1024)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1024)],64))),256)),o(x).length===0?(i(),y(m,{key:1},{default:a(()=>[b(r(t.$t("logs.emptyLogList")),1)]),_:1})):V("",!0),e(c),o(p)>1?(i(),y(m,{key:2},{default:a(()=>[e(S,{modelValue:o(d),"onUpdate:modelValue":n[3]||(n[3]=s=>w(d)?d.value=s:null),length:o(p),"prev-icon":"mdi-menu-left","next-icon":"mdi-menu-right"},null,8,["modelValue","length"])]),_:1})):V("",!0)]),_:1})]))}});xe=ue(Le,[["__scopeId","data-v-1115081b"]])});export{xe as default,__tla};